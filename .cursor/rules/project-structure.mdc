---
alwaysApply: true
---
### Monorepo overview

- **packages**:
  - `durable-execution`: core durable task engine
  - `durable-execution-orpc-utils`: oRPC server/client utilities for remote task enqueue/get
  - `durable-execution-storage-drizzle`: Drizzle ORM storage impls (SQLite, Postgres)
  - `durable-execution-storage-test-utils`: shared storage test harness

### Key entry points

- **Core API**:
  - [`durable-execution/src/index.ts`](mdc:durable-execution/src/index.ts): public exports
  - [`durable-execution/src/executor.ts`](mdc:durable-execution/src/executor.ts): `DurableExecutor`
  - [`durable-execution/src/task.ts`](mdc:durable-execution/src/task.ts): task types/contracts
  - [`durable-execution/src/storage.ts`](mdc:durable-execution/src/storage.ts): `Storage` interface and helpers
  - [`durable-execution/src/in-memory-storage.ts`](mdc:durable-execution/src/in-memory-storage.ts): in-memory impl
  - [`durable-execution/src/errors.ts`](mdc:durable-execution/src/errors.ts), [`serializer.ts`](mdc:durable-execution/src/serializer.ts), [`logger.ts`](mdc:durable-execution/src/logger.ts)

- **oRPC utilities**:
  - [`durable-execution-orpc-utils/src/server.ts`](mdc:durable-execution-orpc-utils/src/server.ts): `createTasksRouter`, `convertClientProcedureToTask`
  - [`durable-execution-orpc-utils/src/client.ts`](mdc:durable-execution-orpc-utils/src/client.ts): `createTaskClientHandles`

- **Drizzle storage**:
  - [`durable-execution-storage-drizzle/src/sqlite.ts`](mdc:durable-execution-storage-drizzle/src/sqlite.ts): SQLite table + storage
  - [`durable-execution-storage-drizzle/src/pg.ts`](mdc:durable-execution-storage-drizzle/src/pg.ts): Postgres table + storage
  - [`durable-execution-storage-drizzle/src/common.ts`](mdc:durable-execution-storage-drizzle/src/common.ts): mapping helpers

- **Test utils**:
  - [`durable-execution-storage-test-utils/src/index.ts`](mdc:durable-execution-storage-test-utils/src/index.ts): `runStorageTest` and temp file helpers

### Scripts and tooling

- Run from repo root (`pnpm@10`, Node >= 20): see [`package.json`](mdc:package.json) and [`turbo.json`](mdc:turbo.json)
  - `pnpm build` → `turbo build`
  - `pnpm test` / `pnpm test-coverage` → `turbo test` / `turbo test-coverage`
  - `pnpm type-check`, `pnpm lint`, `pnpm lint-fix`
  - `pnpm fmt`, `pnpm fmt-check`
  - `pnpm build-docs` builds docs for core via [`durable-execution/scripts/build-docs.ts`](mdc:durable-execution/scripts/build-docs.ts)

### Conventions

- ESM modules, TypeScript across packages
- Linting/formatting via shared configs; tests with Vitest in each package under `tests/*.test.ts`
